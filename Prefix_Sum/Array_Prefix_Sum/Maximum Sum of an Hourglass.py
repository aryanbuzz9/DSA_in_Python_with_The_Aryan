grid = [[6,2,1,3],[4,2,1,5],[9,2,8,7],[4,1,2,9]]
print()
# grid = [[1,2,3],[4,5,6],[7,8,9]]
grid=[[520626,685427,788912,800638,717251,683428],[23602,608915,697585,957500,154778,209236],[287585,588801,818234,73530,939116,252369]]
m=len(grid[0])
n=len(grid)
max_sum=0
# 520626,685427,788912,800638,717251,683428
# 23602,608915,697585,957500,154778,209236
# 287585,588801,818234,73530,939116,252369
# 1,2,3]
# [4,5,6]
# [7,8,9
# print(grid[])
# grid=[[1,2,3,4,5,6],[7,8,9,10,11,12],[13,14,15,16,17,18]]
# 1,2,3,4,5,6],
# [7,8,9,10,11,12],
# [13,14,15,16,17,18]]
k=0
for i in range(n-2):
    # k+=1
    s=sum(grid[i][:3])+grid[i+1][1]+sum(grid[i+2][:3])
    max_sum=max(max_sum,s)
    # print(s)
    for j in range(1,m-2):
        # s=sum(grid[i][j:j+3])+grid[i+1][j+1]+sum(grid[i+2][j:j+3])
        s=s-grid[i][j-1]+grid[i][j+2]-grid[i+1][j]+grid[i+1][j+1]-grid[i+2][j-1]+grid[i+2][j+2]
        max_sum=max(max_sum,s)
    # print(grid[k+1][k+1])
print(max_sum)